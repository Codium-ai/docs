
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../jebrains/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.5">
    
    
      
        <title>AlphaCodium - CodiumAI</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="AlphaCodium - CodiumAI" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="./assets/images/social/alphacodium/index.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="AlphaCodium - CodiumAI" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="./assets/images/social/alphacodium/index.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#alphacodium" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CodiumAI" class="md-header__button md-logo" aria-label="CodiumAI" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CodiumAI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AlphaCodium
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../pragent/" class="md-tabs__link">
        
  
    
  
  PR-Agent

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../codiumate/" class="md-tabs__link">
        
  
    
  
  VSC Codiumate

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../jebrains/" class="md-tabs__link">
        
  
    
  
  JetBrains

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  AlphaCodium

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CodiumAI" class="md-nav__button md-logo" aria-label="CodiumAI" data-md-component="logo">
      
  <img src="../assets/logo.svg" alt="logo">

    </a>
    CodiumAI
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../pragent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PR-Agent
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../codiumate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSC Codiumate
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../jebrains/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JetBrains
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    AlphaCodium
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    AlphaCodium
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      Abstract
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-run" class="md-nav__link">
    <span class="md-ellipsis">
      How to run
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to run">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solving-a-specific-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Solving a specific problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#solving-the-entire-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Solving the entire dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#running-the-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Running the evaluation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#technical-qa" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Q&amp;A
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#broader-applicability" class="md-nav__link">
    <span class="md-ellipsis">
      Broader Applicability
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-problem" class="md-nav__link">
    <span class="md-ellipsis">
      Example Problem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#acknowledgments" class="md-nav__link">
    <span class="md-ellipsis">
      Acknowledgments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" class="md-nav__link">
    <span class="md-ellipsis">
      Citation
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="alphacodium">AlphaCodium</h1>
<blockquote>
<p>Code Generation with AlphaCodium: From Prompt Engineering to Flow Engineering</p>
</blockquote>
<p><a href="https://arxiv.org/abs/2401.08500">Paper</a> |
<a href="https://huggingface.co/datasets/talrid/CodeContests_valid_and_test_AlphaCodium/blob/main/codecontests_valid_and_test_processed_alpha_codium.zip">Dataset</a></p>
<p>Official Implementation</p>
<p>Tal Ridnik, Dedy Kredo, Itamar Friedman</p>
<p>CodiumAI</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#abstract">Abstract</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#how-to-run">How to run</a></li>
<li><a href="#technical-qa">Technical Q&amp;A</a></li>
<li><a href="#broader-applicability">Broader Applicability</a></li>
<li><a href="#example-problem">Example Problem</a></li>
<li><a href="#acknowledgments">Acknowledgments</a></li>
<li><a href="#citation">Citation</a></li>
</ul>
<h2 id="abstract">Abstract</h2>
<p>Code generation problems differ from common natural language problems - they require matching the exact syntax of the target language, identifying happy paths and edge cases, paying attention to numerous small details in the problem spec, and addressing other code-specific issues and requirements. Hence, many of the optimizations and tricks that have been successful in natural language generation may not be effective for code tasks.</p>
<p>In this work, we propose a new approach to code generation by LLMs, which we call AlphaCodium - a test-based, multi-stage, code-oriented iterative flow, that improves the performances of LLMs on code problems.</p>
<p>We tested AlphaCodium on a challenging code generation dataset called CodeContests, which includes competitive programming problems from platforms such as Codeforces. The proposed flow consistently and significantly improves results.
On the validation set, for example, GPT-4 accuracy (pass@5) increased from 19% with a single well-designed direct prompt to 44% with the AlphaCodium flow. </p>
<p>Many of the principles and best practices we acquired in this work, we believe, are broadly applicable to general code generation tasks.</p>
<p><img alt="" src="https://github.com/Codium-ai/AlphaCodium/tree/main/pics/proposed_flow.png" />
<img alt="" src="https://github.com/Codium-ai/AlphaCodium/tree/main/pics/iterations.png" /></p>
<h2 id="installation">Installation</h2>
<p>(1) setup a virtual environment and run: <code>pip install -r requirements.txt</code></p>
<p>(2) Duplicate the file <code>alpha_codium/settings/.secrets_template.toml</code>, rename it as <code>.secrets.toml</code>, and fill in your OpenAI API key:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>[openai]
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>key = &quot;...&quot;
</code></pre></div></p>
<p>(3) Download the processed CodeContest validation and test dataset from <a href="https://huggingface.co/datasets/talrid/CodeContests_valid_and_test_AlphaCodium/blob/main/codecontests_valid_and_test_processed_alpha_codium.zip">hugging face</a>, extract the zip file, and placed the extracted folder in the root of the project.</p>
<h2 id="how-to-run">How to run</h2>
<h3 id="configuration">Configuration</h3>
<p>The file: <code>alpha_codium/settings/configuration.toml</code> contains the configuration for the project.
In the <code>config</code> section you can choose the model you want to use ("gpt-4", "gpt-3.5-turbo-16k", or others).</p>
<h3 id="solving-a-specific-problem">Solving a specific problem</h3>
<p>To solve a specific problem with AlphaCodium, from the root folder run:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>python -m alpha_codium.solve_problem \
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>--dataset_name /path/to/dataset \
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>--split_name test \
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>--problem_number 0
</code></pre></div>
- The <code>dataset_name</code> is the path to the dataset folder you downloaded in the installation step.
- Note that the validation set contains 117 problems, and the test set contains 165 problems, so the <code>problem_number</code> parameter should be accordingly (zero-based)
- The <code>split_name</code> can be either <code>valid</code> or <code>test</code>.
- The following sections in the configuration file: 
<code>solve</code>, <code>self_reflection</code>,<code>possible_solutions</code>,<code>generate_ai_tests</code>,<code>initial_code_generation</code>,<code>public_tests</code>, <code>ai_tests</code><br />
enable to adjust possible configurations for the different stages of the flow.
- Each run logs the results to a file named <code>alpha_codium/example.log</code>. Reviewing the log file is a good way to understand what is going on in each stage of the flow.</p>
<p>Example problem (test set, problem number 12):</p>
<p><img alt="" src="https://github.com/Codium-ai/AlphaCodium/tree/main/pics/example_problem.png" /></p>
<h3 id="solving-the-entire-dataset">Solving the entire dataset</h3>
<p>to solve the entire dataset with AlphaCodium, from the root folder run:
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>python -m alpha_codium.solve_dataset \
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>--dataset_name /path/to/dataset \
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>--split_name test
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>--database_solution_path /path/to/output/dir/dataset_output.json
</code></pre></div></p>
<ul>
<li>The <code>split_name</code> can be either <code>valid</code> or <code>test</code>.</li>
<li><code>database_solution_path</code> is the path to the directory where the solutions will be saved.</li>
<li>The <code>dataset</code> section in the configuration file contains the configuration for the running and evaluation of a dataset.</li>
<li>Note that this is a long process, and it may take a few days to complete with large models (e.g. GPT-4) and several iterations per problem. </li>
<li><code>dataset.num_iterations</code> defines the number of iterations for each problem (pass@K). For a large number of iterations, it is recommended to introduce some randomness and different options for each iteration to achieve top results.</li>
</ul>
<h3 id="running-the-evaluation">Running the evaluation</h3>
<p>Once you generate a solution for the entire dataset (valid or test), you can evaluate it by running:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>python -m alpha_codium.evaluate_dataset\
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>--dataset_name /path/to/dataset\
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>--split_name test\
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>--database_solution_path /path/to/output/dir/dataset_output.json
</code></pre></div></p>
<h2 id="technical-qa">Technical Q&amp;A</h2>
<p>Aggregating some technical questions we received about this project:</p>
<hr />
<p><strong>Q: How much time did you spend on "prompt engineering" compared to "flow engineering"?</strong>
<strong>A:</strong> Structured output almost completely eliminates the need for simple prompt engineering.
We estimate that ~95% of the time we did more high-level design, reasoning, and injecting data at the correct places, ..., a.k.a. "flow engineering".</p>
<hr />
<p><strong>Q: How do you know that there wasn't a data leakage?</strong> 
<strong>A:</strong> The test set of CodeContests dataset comprises problems published after September 2021, while the GPT-4 model variant we used (gpt-4-0613) has a data cutoff of September 2021. Hence, there is no data leakage for GPT4, on the test set.
For other models like DeepSeek, we cannot be sure. However, note that our <a href="https://github.com/Codium-ai/AlphaCodium/tree/main/pics/comparison.png">main result</a> is a comparison of "direct prompt" vs. "AlphaCodium flow". Data leakage would help both approaches, so the relative improvement of AlphaCodium flow is still valid.</p>
<hr />
<p><strong>Q: Is this project relevant only to specific programming languages?</strong>
<strong>A:</strong> No. The proposed flow is language agnostic. We generated solutions in Python, but the flow can be applied to any language.</p>
<hr />
<p><strong>Q: How did you manage the context window?</strong> 
<strong>A:</strong> We used models with a context window of 8192 tokens, and we did not encounter cases where it did not suffice.
However, we clearly observed that as the context we used in practice grows larger (let's say, above 4000 tokens), the model starts to "ignore" some of the information in the context. Hence, there is a clear tradeoff:
- Injecting the results of previous stages into the context, may help the model to generate better code.
- However, it may also cause the model to ignore specific details and nuances from the problem description.</p>
<hr />
<p><strong>Q: Is this work "realistic" in terms of the number of LLM calls?</strong> 
<strong>A:</strong> In comparison to AlphaCode, we do four orders of magnitude (!) fewer <a href="https://github.com/Codium-ai/AlphaCodium/tree/main/pics/computational_effort.png">calls</a> (per solution AlphaCodium does 15-20 calls).
Yet we acknowledge that for some applications, this may still be too much, and more optimizations are needed. We however believe that many of the ideas and principles we acquired in this work are broadly applicable, even when the number of calls is further limited.</p>
<hr />
<p><strong>Q: Why do you iterate only on the generated code, and not on the AI-generated tests?</strong>
<strong>A:</strong> For code problems in CodeContests, the tests are a list of input-output pairs. Hence, you don't really learn anything new when you "fix" a test - you just change its output to the prediction of the generated code. Instead of fixing tests, we preferred to always try and fix the code, while using "test anchors". (see the <a href="https://arxiv.org/abs/2401.08500">paper</a> for more details).
However, for other code generation tasks, where the tests are more complex and contain runnable code, iterating on the tests, in addition to iterating on the generated code, may be beneficial.</p>
<h2 id="broader-applicability">Broader Applicability</h2>
<p>While this work presents results on CodeContests dataset, we believe that it has a broader applicability.</p>
<p>First and foremost, we feel that the proposed AlphaCodium <a href="https://github.com/Codium-ai/AlphaCodium/tree/main/pics/proposed_flow.png">flow</a>, with reasonable adjustments, can be used as a more general framework for other code generation tasks.</p>
<p>Secondly, many of the design concepts, principles, and tricks we acquired in this work are broadly applicable as-is to any general code generation tasks. For example:
- <strong>YAML Structured output</strong>: asking the model to generate an output in YAML format, equivalent to a given Pydantic class
- <strong>Semantic reasoning via bullet points analysis</strong>: Bullet points analysis encourages an in-depth understanding of the problem, and forces the model to divide the output into logical semantic sections, leading to improved results
- <strong>LLMs do better when generating a modular code</strong>: when asking the model to: <code>divide the generated code into small sub-functions, with meaningful names and functionality</code>, we observe a better-produced code, with fewer bugs, and higher success rates for the iterative fixing stages.
- <strong>Soft decisions with double validation</strong>: with a double validation process, we add an extra step where, given the generated output, the model is asked to re-generate the same output, but correct it if needed
- <strong>Leave room for exploration</strong>: since the model can be wrong, it’s better to avoid irreversible decisions, and leave room for exploration and code iterations with different possible solutions</p>
<p>The list above is partial. See the <a href="https://arxiv.org/abs/2401.08500">paper</a> for more details. The code provided <a href="./alpha_codium/settings">in this repo</a> can be used as a reference for better understanding the proposed concepts, and for applying them to other code generation tasks.</p>
<h2 id="example-problem">Example Problem</h2>
<p>In this section, we present an example for a full problem from CodeContests dataset (test-set, problem 1), in order to demonstrate the complexity of the problems in the dataset, and the challenges they pose to LLMs.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>problem name: &#39;1575_B. Building an Amusement Park&#39;
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>problem description:
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>Mr. Chanek lives in a city represented as a plane. He wants to build an amusement park in the shape of a circle of radius r. 
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>The circle must touch the origin (point (0, 0)).
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>There are n bird habitats that can be a photo spot for the tourists in the park. The i-th bird habitat is at point p_i = (x_i, y_i). 
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>Find the minimum radius r of a park with at least k bird habitats inside. 
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>A point is considered to be inside the park if and only if the distance between p_i and the center of the park is less than or equal 
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>to the radius of the park.
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>Note that the center and the radius of the park do not need to be integers.
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>In this problem, it is guaranteed that the given input always has a solution with r ≤ 2 ⋅ 10^5.
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>Input
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a>The first line contains two integers n and k (1 ≤ n ≤ 10^5, 1 ≤ k ≤ n) — the number of bird habitats in the city and the number of bird 
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>habitats required to be inside the park.
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a>The i-th of the next n lines contains two integers x_i and y_i (0 ≤ |x_i|, |y_i| ≤ 10^5) — the position of the i-th bird habitat.
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>
<a id="__codelineno-4-22" name="__codelineno-4-22" href="#__codelineno-4-22"></a>Output
<a id="__codelineno-4-23" name="__codelineno-4-23" href="#__codelineno-4-23"></a>
<a id="__codelineno-4-24" name="__codelineno-4-24" href="#__codelineno-4-24"></a>Output a single real number r denoting the minimum radius of a park with at least k bird habitats inside. It is guaranteed that the given 
<a id="__codelineno-4-25" name="__codelineno-4-25" href="#__codelineno-4-25"></a>input always has a solution with r ≤ 2 ⋅ 10^5.
<a id="__codelineno-4-26" name="__codelineno-4-26" href="#__codelineno-4-26"></a>Your answer is considered correct if its absolute or relative error does not exceed 10^{-4}.
<a id="__codelineno-4-27" name="__codelineno-4-27" href="#__codelineno-4-27"></a>Formally, let your answer be a, and the jury&#39;s answer be b. Your answer is accepted if and only if \frac{|a - b|}{max{(1, |b|)}} ≤ 10^{-4}.
<a id="__codelineno-4-28" name="__codelineno-4-28" href="#__codelineno-4-28"></a>
<a id="__codelineno-4-29" name="__codelineno-4-29" href="#__codelineno-4-29"></a>Examples
<a id="__codelineno-4-30" name="__codelineno-4-30" href="#__codelineno-4-30"></a>
<a id="__codelineno-4-31" name="__codelineno-4-31" href="#__codelineno-4-31"></a>Input
<a id="__codelineno-4-32" name="__codelineno-4-32" href="#__codelineno-4-32"></a>
<a id="__codelineno-4-33" name="__codelineno-4-33" href="#__codelineno-4-33"></a>8 4
<a id="__codelineno-4-34" name="__codelineno-4-34" href="#__codelineno-4-34"></a>-3 1
<a id="__codelineno-4-35" name="__codelineno-4-35" href="#__codelineno-4-35"></a>-4 4
<a id="__codelineno-4-36" name="__codelineno-4-36" href="#__codelineno-4-36"></a>1 5
<a id="__codelineno-4-37" name="__codelineno-4-37" href="#__codelineno-4-37"></a>2 2
<a id="__codelineno-4-38" name="__codelineno-4-38" href="#__codelineno-4-38"></a>2 -2
<a id="__codelineno-4-39" name="__codelineno-4-39" href="#__codelineno-4-39"></a>-2 -4
<a id="__codelineno-4-40" name="__codelineno-4-40" href="#__codelineno-4-40"></a>-1 -1
<a id="__codelineno-4-41" name="__codelineno-4-41" href="#__codelineno-4-41"></a>-6 0
<a id="__codelineno-4-42" name="__codelineno-4-42" href="#__codelineno-4-42"></a>
<a id="__codelineno-4-43" name="__codelineno-4-43" href="#__codelineno-4-43"></a>Output
<a id="__codelineno-4-44" name="__codelineno-4-44" href="#__codelineno-4-44"></a>
<a id="__codelineno-4-45" name="__codelineno-4-45" href="#__codelineno-4-45"></a>3.1622776589
<a id="__codelineno-4-46" name="__codelineno-4-46" href="#__codelineno-4-46"></a>
<a id="__codelineno-4-47" name="__codelineno-4-47" href="#__codelineno-4-47"></a>
<a id="__codelineno-4-48" name="__codelineno-4-48" href="#__codelineno-4-48"></a>Input
<a id="__codelineno-4-49" name="__codelineno-4-49" href="#__codelineno-4-49"></a>
<a id="__codelineno-4-50" name="__codelineno-4-50" href="#__codelineno-4-50"></a>1 1
<a id="__codelineno-4-51" name="__codelineno-4-51" href="#__codelineno-4-51"></a>0 0
<a id="__codelineno-4-52" name="__codelineno-4-52" href="#__codelineno-4-52"></a>
<a id="__codelineno-4-53" name="__codelineno-4-53" href="#__codelineno-4-53"></a>
<a id="__codelineno-4-54" name="__codelineno-4-54" href="#__codelineno-4-54"></a>Output
<a id="__codelineno-4-55" name="__codelineno-4-55" href="#__codelineno-4-55"></a>
<a id="__codelineno-4-56" name="__codelineno-4-56" href="#__codelineno-4-56"></a>0.0000000000
<a id="__codelineno-4-57" name="__codelineno-4-57" href="#__codelineno-4-57"></a>
<a id="__codelineno-4-58" name="__codelineno-4-58" href="#__codelineno-4-58"></a>Note
<a id="__codelineno-4-59" name="__codelineno-4-59" href="#__codelineno-4-59"></a>
<a id="__codelineno-4-60" name="__codelineno-4-60" href="#__codelineno-4-60"></a>In the first example, Mr. Chanek can put the center of the park at (-3, -1) with radius √{10} ≈ 3.162. It can be proven this is the minimum r.
</code></pre></div>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>Our process CodeContests dataset is based on the original <a href="https://huggingface.co/datasets/deepmind/code_contests">CodeContests</a> dataset.
We removed the train set (which is not relevant to our work) and did some post-processing and cleaning to the validation and test sets.</p>
<h2 id="citation">Citation</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>@misc{ridnik2024code,
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>      title={Code Generation with AlphaCodium: From Prompt Engineering to Flow Engineering}, 
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>      author={Tal Ridnik and Dedy Kredo and Itamar Friedman},
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>      year={2024},
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>      eprint={2401.08500},
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>      archivePrefix={arXiv},
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>      primaryClass={cs.LG}
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>}
</code></pre></div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href=""  target="_blank" rel="noopener">CodiumAI</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/james-willett" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/TheJamesWillett" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/willettjames/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy", "toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c18c5fb9.min.js"></script>
      
    
  </body>
</html>